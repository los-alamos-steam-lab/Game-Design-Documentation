

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Godot Template: Understanding the Camera &mdash; Game Design 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/explore.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/nbsphinx.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/js/custom.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Top Down RPG: Making it Your Own" href="../getting-started/index.html" />
    <link rel="prev" title="Top Down RPG: Template" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

  
<nav id="explore-links">
    <a class='caption' href="https://lasteamlab.com/">
        Los Alamos STEAM Lab
    </a>

    <!-- <ul>
        <li>
            <a>Get Started</a>
            <ul>
                <li><a href="https://docs.dask.org/en/latest/install.html"> Install </a></li>
                <li><a href="https://examples.dask.org"> Examples </a></li>
                <li><a href="https://github.com/dask/dask-tutorial"> Tutorial </a></li>
                <li><a href="https://docs.dask.org/en/latest/why.html"> Why Dask? </a></li>
                <li><a href="https://stories.dask.org/en/latest"> Use Cases </a></li>
                <li><a href="https://www.youtube.com/watch?v=RA_2qdipVng&list=PLRtz5iA93T4PQvWuoMnIyEIz1fXiJ5Pri"> Talks
                    </a></li>
                <li><a href="https://mybinder.org/v2/gh/dask/dask-examples/master?urlpath=lab"> Try Online </a></li>
                <li><a href="https://dask.org/slides"> Slides </a></li>
            </ul>
        </li>

        <li>
            <a href="">Algorithms</a>
            <ul>
                <li><a href="https://docs.dask.org/en/latest/array.html">Arrays</a></li>
                <li><a href="https://docs.dask.org/en/latest/dataframe.html">Dataframes</a></li>
                <li><a href="https://docs.dask.org/en/latest/bag.html">Bags</a></li>
                <li><a href="https://docs.dask.org/en/latest/delayed.html">Delayed (custom)</a></li>
                <li><a href="https://docs.dask.org/en/latest/futures.html">Futures (real-time)</a></li>
                <li><a href="http://ml.dask.org">Machine Learning</a></li>
                <li><a href="https://xarray.pydata.org/en/latest/">XArray</a></li>
            </ul>
        </li>

        <li>
            <a href="https://docs.dask.org/en/latest/setup.html">Setup</a>
            <ul>
                <li><a href="https://docs.dask.org/en/latest/setup/single-machine.html"> Local </a></li>
                <li><a href="https://docs.dask.org/en/latest/setup/cloud.html"> Cloud </a></li>
                <li><a href="https://docs.dask.org/en/latest/setup/hpc.html"> HPC </a></li>
                <li><a href="https://kubernetes.dask.org/en/latest/"> Kubernetes </a></li>
                <li><a href="https://yarn.dask.org/en/latest/"> Hadoop / Yarn </a></li>
            </ul>
        </li>

        <li>
            <a>Community</a>
            <ul>
                <li><a href="http://docs.dask.org/en/latest/support.html">Ask for Help</a></li>
                <li><a href="https://github.com/dask">Github</a></li>
                <li><a href="https://stackoverflow.com/questions/tagged/dask">Stack Overflow</a></li>
                <li><a href="https://twitter.com/dask_dev">Twitter</a></li>
                <li><a href="https://blog.dask.org/"> Developer Blog </a></li>
                <li><a href="https://youtube.com/c/dask-dev"> YouTube Channel </a></li>
            </ul>
        </li>
    </ul> -->

</nav>

  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #6200ad" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Game Design
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
<div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../godot.html">Godot Game Engine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../getting-started.html">Getting Started with Godot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started.html#downloading">Downloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started.html#setting-up-the-environment">Setting up the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started.html#comment-blocks">Comment Blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started.html#indenting">Indenting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lessons/index.html">Top Down RPG: Lessons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lessons/1-player-movement.html">1: Player Movement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/1-player-movement.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/1-player-movement.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/1-player-movement.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/1-player-movement.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/2-animations.html">2: Walk and Push Animations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/2-animations.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/2-animations.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/2-animations.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/2-animations.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/2-animations.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/3-entity-class.html">3: Entity Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/3-entity-class.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/3-entity-class.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/3-entity-class.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/3-entity-class.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/4-knockback.html">4: Knockback</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/4-knockback.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/4-knockback.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/4-knockback.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/4-knockback.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/5-items.html">5: Item Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/5-items.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/5-items.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/5-items.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/5-items.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/6-enemy-health.html">6: Enemy Health</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/6-enemy-health.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/6-enemy-health.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/6-enemy-health.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/6-enemy-health.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/6-enemy-health.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/7-screen-scrolling.html">7: Basic Screen Scorlling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/7-screen-scrolling.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/7-screen-scrolling.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/7-screen-scrolling.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/7-screen-scrolling.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/7-screen-scrolling.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/8-object-placer.html">8: Object Placer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/8-object-placer.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/8-object-placer.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/8-object-placer.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/8-object-placer.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/9-keys.html">9: Keys and Locked Doors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/9-keys.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/9-keys.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/9-keys.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/9-keys.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/9-keys.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/10-heart-ui.html">10: Heart UI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/10-heart-ui.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/10-heart-ui.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/10-heart-ui.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/10-heart-ui.html#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/10-heart-ui.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lessons/11-heart-pickups.html">11: Heart Pickups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../lessons/11-heart-pickups.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/11-heart-pickups.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/11-heart-pickups.html#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lessons/11-heart-pickups.html#code">Code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Top Down RPG: Template</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1: Camera</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scene-tree">Scene Tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exports">Exports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signals">Signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code">Code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/index.html">Top Down RPG: Making it Your Own</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/1-map-area.html">1: Making a New Map Area</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/1-map-area.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/1-map-area.html#drawing-the-scene">Drawing the Scene</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/1-map-area.html#placing-items-and-entities">Placing Items and Entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/1-map-area.html#playing-the-scene">Playing the Scene</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../assets/assets.html">Asset Creation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../assets/apps/apps.html">Graphics Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../assets/apps/inkscape.html">Inkscape</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/inkscape.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/inkscape.html#getting-started">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/inkscape.html#more-coming">More Coming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../assets/apps/gimp.html">GIMP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/gimp.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/gimp.html#getting-started">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/gimp.html#more-coming">More Coming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../assets/apps/pixel-editors.html">Pixel Editors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/pixel-editors.html#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/pixel-editors.html#online-apps">Online Apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../assets/apps/pixel-editors.html#more-coming">More Coming</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  
    <img src="../../../_static/images/mouse-hi-res.png" />
</div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Game Design</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../godot.html">Godot Game Engine</a> &raquo;</li>
        
          <li><a href="index.html">Top Down RPG: Template</a> &raquo;</li>
        
      <li>Godot Template: Understanding the Camera</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/godot/RPG/template/1-camera.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="godot-template-understanding-the-camera">
<h1>Godot Template: Understanding the Camera<a class="headerlink" href="#godot-template-understanding-the-camera" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Camera scene follows the player, resets rooms that have been
exited and initiates saves.  It isn’t necessary to full understand
it, but you should at least have an idea of what it impacts.</p>
</div>
<div class="section" id="scene-tree">
<h2>Scene Tree<a class="headerlink" href="#scene-tree" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Camera is type Camera2D</dt><dd><ul>
<li><p>Tween is type Tween</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="exports">
<h2>Exports<a class="headerlink" href="#exports" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>SCREEN_SIZE</dt><dd><ul>
<li><p>Defaults to Vector2.ZERO and if it is not set, it gets set based on ProjectSettings at runtime.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>SCROLL_SPEED</dt><dd><ul>
<li><p>Used by Tween</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>target</dt><dd><ul>
<li><p>The path to the scene that the camera follows (expected to be the player)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>screen_change:</dt><dd><ul>
<li><p>This is emitted by _process while the tween is active</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>screen_change_started</dt><dd><ul>
<li><p>This is connected to tween_started</p></li>
<li><dl class="simple">
<dt>This triggers:</dt><dd><ul>
<li><p>Entities to paused (entity.gd)</p></li>
<li><p>Enemies reset (entity.gd)</p></li>
<li><p>Pickups with the “disappear” flag and not on screen to be deleted (pickup.gd)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>screen_change_completed</dt><dd><ul>
<li><p>This is connected to tween_completed</p></li>
<li><dl class="simple">
<dt>This triggers:</dt><dd><ul>
<li><p>Entities to be unpaused if they’re in the camera rect (entity.gd)</p></li>
<li><p>The game to be saved (Main.gd)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<div class="section" id="camera-gd">
<h3>camera.gd<a class="headerlink" href="#camera-gd" title="Permalink to this headline">¶</a></h3>
<div class="highlight-gdscript notranslate"><div class="highlight"><pre><span></span><span class="k">extends</span> <span class="n">Camera2D</span>

<span class="k">export</span><span class="p">(</span><span class="nb nb-Type">Vector2</span><span class="p">)</span> <span class="k">var</span> <span class="n">SCREEN_SIZE</span> <span class="o">=</span> <span class="nb nb-Type">Vector2</span><span class="o">.</span><span class="n">ZERO</span>
<span class="k">export</span><span class="p">(</span><span class="nb nb-Type">float</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">)</span> <span class="k">var</span> <span class="n">SCROLL_SPEED</span>    <span class="o">=</span> <span class="mf">0.5</span>
<span class="k">export</span><span class="p">(</span><span class="nb nb-Type">NodePath</span><span class="p">)</span> <span class="k">var</span> <span class="n">target</span>

<span class="k">var</span> <span class="n">target_grid_pos</span> <span class="p">:</span><span class="o">=</span> <span class="nb nb-Type">Vector2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="k">var</span> <span class="n">last_target_grid_pos</span> <span class="p">:</span><span class="o">=</span> <span class="nb nb-Type">Vector2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="k">var</span> <span class="n">camera_rect</span> <span class="p">:</span><span class="o">=</span> <span class="nb nb-Type">Rect2</span><span class="p">()</span>

<span class="k">signal</span> <span class="n">screen_change</span>
<span class="k">signal</span> <span class="n">screen_change_started</span>
<span class="k">signal</span> <span class="n">screen_change_completed</span>

<span class="k">func</span> <span class="n">_ready</span><span class="p">():</span>
    <span class="c1"># target is set in the scene the camera lives in and is generally the player</span>
    <span class="c1"># setting it in the scene means not hard coding it</span>
    <span class="n">target</span> <span class="o">=</span> <span class="n">get_node</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">SCREEN_SIZE</span> <span class="o">==</span> <span class="nb nb-Type">Vector2</span><span class="o">.</span><span class="n">ZERO</span><span class="p">:</span>
        <span class="n">SCREEN_SIZE</span> <span class="o">=</span> <span class="nb nb-Type">Vector2</span><span class="p">(</span><span class="n">ProjectSettings</span><span class="o">.</span><span class="n">get_setting</span><span class="p">(</span><span class="s2">&quot;display/window/size/width&quot;</span><span class="p">),</span><span class="n">ProjectSettings</span><span class="o">.</span><span class="n">get_setting</span><span class="p">(</span><span class="s2">&quot;display/window/size/height&quot;</span><span class="p">))</span>

    <span class="c1"># Find out which grid the target is in and</span>
    <span class="c1"># move the camera to the top left corner</span>
    <span class="n">target_grid_pos</span> <span class="o">=</span> <span class="n">get_grid_pos</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="n">target_grid_pos</span> <span class="o">*</span> <span class="n">SCREEN_SIZE</span>
    <span class="n">last_target_grid_pos</span> <span class="o">=</span> <span class="n">target_grid_pos</span>

    <span class="c1"># connect some actions - a tween is a flexible animator and handles</span>
    <span class="c1"># our smooth screen transitions</span>
    <span class="o">$</span><span class="n">Tween</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;tween_started&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;screen_change_started&quot;</span><span class="p">)</span>
    <span class="o">$</span><span class="n">Tween</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;tween_completed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;screen_change_completed&quot;</span><span class="p">)</span>


<span class="k">func</span> <span class="n">_process</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
    <span class="n">camera_rect</span> <span class="o">=</span> <span class="nb nb-Type">Rect2</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">SCREEN_SIZE</span><span class="p">)</span>

    <span class="c1"># Signals are a way to communitcate with other scripts in the game</span>
    <span class="k">if</span> <span class="o">$</span><span class="n">Tween</span><span class="o">.</span><span class="n">is_active</span><span class="p">():</span>
        <span class="n">emit_signal</span><span class="p">(</span><span class="s2">&quot;screen_change&quot;</span><span class="p">)</span>

    <span class="c1"># if the player is no longer in the camera rectangle</span>
    <span class="k">if</span> <span class="o">!$</span><span class="n">Tween</span><span class="o">.</span><span class="n">is_active</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">camera_rect</span><span class="o">.</span><span class="n">has_point</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">position</span><span class="p">):</span>
        <span class="n">scroll_camera</span><span class="p">()</span>

<span class="k">func</span> <span class="n">scroll_camera</span><span class="p">():</span>
    <span class="n">target_grid_pos</span> <span class="o">=</span> <span class="n">get_grid_pos</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="o">$</span><span class="n">Tween</span><span class="o">.</span><span class="n">interpolate_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">last_target_grid_pos</span> <span class="o">*</span> <span class="n">SCREEN_SIZE</span><span class="p">,</span> <span class="n">target_grid_pos</span> <span class="o">*</span> <span class="n">SCREEN_SIZE</span><span class="p">,</span> <span class="n">SCROLL_SPEED</span><span class="p">,</span> <span class="n">Tween</span><span class="o">.</span><span class="n">TRANS_LINEAR</span><span class="p">,</span> <span class="n">Tween</span><span class="o">.</span><span class="n">EASE_IN_OUT</span><span class="p">)</span>
    <span class="o">$</span><span class="n">Tween</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">last_target_grid_pos</span> <span class="o">=</span> <span class="n">target_grid_pos</span>

<span class="c1"># find the position placement on an (x,y) grid</span>
<span class="k">func</span> <span class="n">get_grid_pos</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
    <span class="k">var</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">floor</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">SCREEN_SIZE</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="k">var</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">floor</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">SCREEN_SIZE</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb nb-Type">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Signals are a way to communitcate with other scripts in the game</span>
<span class="k">func</span> <span class="n">screen_change_started</span><span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="n">nodepath</span><span class="p">):</span>
    <span class="n">emit_signal</span><span class="p">(</span><span class="s2">&quot;screen_change_started&quot;</span><span class="p">)</span>

<span class="k">func</span> <span class="n">screen_change_completed</span><span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="n">nodepath</span><span class="p">):</span>
    <span class="n">emit_signal</span><span class="p">(</span><span class="s2">&quot;screen_change_completed&quot;</span><span class="p">)</span>

<span class="k">func</span> <span class="n">area_exited</span><span class="p">(</span><span class="n">area</span><span class="p">):</span>
    <span class="k">var</span> <span class="n">body</span> <span class="o">=</span> <span class="n">area</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">body</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;projectile&quot;</span><span class="p">):</span>
        <span class="n">body</span><span class="o">.</span><span class="n">queue_free</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">area</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;disappears&quot;</span><span class="p">):</span>
        <span class="n">area</span><span class="o">.</span><span class="n">queue_free</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../getting-started/index.html" class="btn btn-neutral float-right" title="Top Down RPG: Making it Your Own" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Top Down RPG: Template" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Lisabeth Lueninghoener.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>